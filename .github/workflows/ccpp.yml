name: FEMM Continuous Integration

on: workflow_dispatch

jobs:
  win-vcpkg:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v2

    - uses: lukka/get-cmake@latest

    - name: 'Build FEMM'
      shell: pwsh
      run: ${{ github.workspace }}/build.ps1 -DoNotUpdateTOOL -DisableInteractive -DisableLaTeX -ForceTriangle32bit -DoNotDeleteBuildFolder

    - name: 'Build Installer'
      run: |
        dir
        7z a windows_msvc.zip .\build_win_release64

    - uses: actions/upload-artifact@v2
      with:
        name: FEMM-windows
        path: windows_msvc.zip
        retention-days: 5
